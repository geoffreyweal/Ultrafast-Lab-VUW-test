{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"VUW Ultrafast Lab","text":"<p>blab blab blab k.jfkjdfbnvdfknvdflkvndflkv</p> <p>We are wanting to find the transition state for a single mechanistic step. Visually, we are trying to find a 1<sup>st</sup> order saddlepoint to get from the reactant to the product on the potential energy surface (See image below). In this procedure/tutorial, we will look at how to obtain the transition state using ORCA.</p> Mechanistic Step Example (Image adapted from J. A. Keith, V. Vassilev-Galindo, B. Cheng, S. Chmiela, M. Gastegger, K.-R. M\u00fcller, and A. Tkatchenko; Chem. Rev. 2021, 121, 16, 9816\u20139872). <p>Note</p> <p>The x and y axis given as R<sub>1</sub> and R<sub>2</sub> in the image above just indicate there is a change in spatial coordinates of the atoms in your molecule going from the reactant to the product. </p>"},{"location":"Before_You_Begin.html","title":"Before You Begin","text":"<p>We will now perform the machanistic investigation procedure in ORCA. We will </p> <ul> <li>Present the example that we will use to describe the steps to this procedure</li> <li>Indicate what settings you would include in all your <code>inp</code> files for this procedure</li> <li>Present the steps for performing the machanistic investigation procedure</li> </ul>"},{"location":"Before_You_Begin.html#mechanistic-step-example","title":"Mechanistic Step Example","text":"<p>For this tutorial, we will be using this procedure to understand the following mechanistic step. Here, we want to determine the transition state for a Cu<sup>+</sup> atom inserting itself into the alpha C-H bond in benzylamine. </p> Mechanistic Step Example."},{"location":"Before_You_Begin.html#what-you-need-to-consider-before-beginning","title":"What You Need to Consider Before Beginning","text":"<p>Before beginning, you need to decide what universal setting you want to use for your mechanisms. This includes:</p> <ul> <li>what functional you want to use, </li> <li>what basis set you want to use, </li> <li>if you want to use a solvent model, and if so what model and solvent you want to include, </li> <li>etc...</li> </ul> Example of functional, basis set, and solvent model included in the ORCA input script.<pre><code>!B3LYP DEF2-TZVP D3BJ\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n</code></pre> <p>Other options that are good to include in all your ORCA input files are:</p> Options that are good to add into your ORCA input files. You may need to change these if you have convergence issues.<pre><code>%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%PAL NPROCS 32 END # The number of CPUs you want ORCA to use\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n</code></pre> <p>RECOMMENDATIONS</p> <p>With regards to the functional, basis set, solvent model, etc., it is recommended that you discuss what you are wanting to do with a computational chemist (if you are not a computational chemist) to get advice about what functional, basis set, solvent model, etc are most appropriate for your project and the questions you are wanting to answer using ORCA. </p> <ul> <li>It is important to make these choices before beginning your calculations, as you will need to keep these settings consistent across all the mechanistic steps you want to perform. </li> </ul> <p>I would personally recommend reading several computational papers that are related to the system you are looking at understanding, as well as reading the following papers to understand what functional and basis set is most appropriate for your project:</p> <ul> <li>https://onlinelibrary.wiley.com/doi/epdf/10.1002/anie.202205735 (This paper is VERY recommended to non-computational chemists and computational chemist. It is a very good guide at all the considerations you should make and best practices)</li> <li>https://pubs.rsc.org/en/content/articlelanding/2017/cp/c7cp04913g (The results section (particularly the end of the results section) provides a list of good functionals to use based on scientific validations)</li> <li>https://bpb-ap-se2.wpmucdn.com/blogs.unimelb.edu.au/dist/0/196/files/2021/05/GOERIGK_GroundStateDFT_RACI2021_handout.pdf (Slides from Larz Goerik based on the paper above)</li> <li>https://www.publish.csiro.au/CH/CH20093 (This paper give an idea of what you need to think about for excited state calculations)</li> </ul>"},{"location":"Before_You_Begin.html#the-orca-documentation-and-other-resources","title":"The ORCA Documentation and Other Resources","text":"<p>It is a good idea to have the ORCA manual on hand to figure out what keywords to give in your <code>orca.inp</code> file that you would like to use for your calculations, as well as to help toubleshoot problems that arise when you run your ORCA jobs. </p> <p>Note</p> <p>You can download the ORCA manual for the Github page by clicking here.</p> <p>There are other resources which are great to read for help and troubleshooting. Here are some of these resources:</p> <ul> <li>The ORCA Input Library: https://sites.google.com/site/orcainputlibrary</li> <li>ORCA tutorials from orcasoftware.de: https://www.faccts.de/docs/orca/6.0/tutorials/</li> </ul>"},{"location":"Investigating_Mechanisms.html","title":"How to Investigate Reaction Mechanisms using ORCA","text":"<p>It is possible to investigate reaction mechanisms using ORCA, as long as you know what the mechanisms are that you want to investigate. You can:</p> <ul> <li>Obtain the activation energies of a mechanism, </li> <li>Determine the rate determining step for a reaction mechanism, and</li> <li>Investigate multiple mechanisms for getting from a reactant to a product to determine the kinetically likely pathways.<sup>1</sup></li> </ul> <p>Note</p> <p>You need to have some idea about your mechanism before hand. ORCA can not determine pathways automatically, it can only investigate potential mechanistic pathways that you give it to investigate. </p> <ul> <li>However, the mechanisms you propose don't have to be correct. ORCA can be used to determine if mechanisms are likely or not. </li> </ul>"},{"location":"Investigating_Mechanisms.html#how-do-we-investigate-reaction-mechanisms-using-computational-chemistry","title":"How do we Investigate Reaction Mechanisms using Computational Chemistry","text":"<p>To investigate reaction mechanisms using computational chemistry, we need to make sure we have clear mechanistic pathways that we can interrogate. </p> <p>For example, consider the following overall reaction:</p> An example overall reaction. <p>There are several ways that this mechanism could proceed. Here, it is important that we give explicit details about how we believe this reaction reaction proceed. Given below is an example of some of the ways this reaction could proceed, given in a mechanistic scheme:</p> An example of reaction mechanism scheme for this overall reaction. This scheme give multiple pathways that this reaction could proceed. Only the beginning segment of the reaction mechanisms have been shown here. <p>We can use ORCA to study each mechanistic step in this mechanistic scheme. The way to do this is to give a name to each step. An example of this is shown below:</p> An example of reaction mechanism scheme for this overall reaction, where each mechanistic step has been labelled. <p>It is important to set up your folder system very clearly, as you may be running lots of calculations at the same time and will be collecting a lot of information about numerous mechanistic steps. Below is the recommended way to set up your folder system for studying this example mechanism:</p> An example of reaction mechanism scheme for this overall reaction, where each mechanistic step has been labelled. <p>For the rest of this tutorial, we will focus on understanding the kinetics of just one of these mechanistic steps. In this example, we will focus on Step C. Read the Before You Begin section to proceed with this tutorial. </p> <ol> <li> <p>You can also investigate the thermodynamically-limiting reaction mechanisms as well using ORCA. This is generally easier to do as you don't have to understand kinetics to do this, which means you dont need to run all the steps you need to do here to obtain activation energies and transition states.\u00a0\u21a9</p> </li> </ol>"},{"location":"Programs_to_Install.html","title":"Programs to Install","text":"<p>There are several programs that you should install on your computer for running this procedure. These are:</p>"},{"location":"Programs_to_Install.html#sublime-or-notepad","title":"Sublime or Notepad++","text":"<p>It is a good idea to have a notepad program for reading and editing files easily on your computer. Here are two recommendations for notepads:</p> <ul> <li>Sublime: https://www.sublimetext.com</li> <li>Notepad++: https://notepad-plus-plus.org/</li> </ul>"},{"location":"Programs_to_Install.html#python-3-and-pip3","title":"Python 3 and <code>pip3</code>","text":"<p>This tutorial is designed to work with Python 3. To find out if you have Python 3 on your computer and what version you have, type into the terminal:</p> <pre><code>python --version\n</code></pre> <p>If you have Python 3 on your computer, you will get the version of python you have on your computer. E.g:</p> <pre><code>user@computer_name path % python --version\nPython 3.11.6\n</code></pre> <p>If you have Python 3, you may have <code>pip</code> installed on your computer as well. <code>pip</code> is a python package installation tool that is recommended by Python for installing Python packages. To see if you have <code>pip</code> installed, type into the terminal:</p> <p><pre><code>pip list\n</code></pre> If you get back a list of python packages install on your computer, you have <code>pip</code> installed. E.g.</p> <pre><code>user@computer_name Documentation % pip3 list\nPackage         Version\n--------------- -----------\nase             3.26.0\ncontourpy       1.3.3\ncycler          0.12.1\net_xmlfile      2.0.0\nfcswrite        0.6.2\nfonttools       4.60.1\nkiwisolver      1.4.9\nmatplotlib      3.10.6\nnarwhals        2.7.0\nnumpy           2.3.3\nopenpyxl        3.1.5\npackaging       25.0\npandas          2.3.3\npatsy           1.0.1\npillow          11.3.0\npip             25.2\nplotly          6.3.1\npyparsing       3.2.5\npython-dateutil 2.9.0.post0\npytz            2025.2\nscipy           1.16.2\nsetuptools      80.9.0\nsix             1.17.0\nstatsmodels     0.14.5\ntqdm            4.67.1\ntzdata          2025.2\nviewORCA        0.2.2\nxlsxwriter      3.2.9\n</code></pre> <p>If you do not see this, you probably do not have <code>pip</code> installed on your computer. If this is the case, check out PIP Installation. </p> <p>Note</p> <p>In most cases, <code>pip</code> and <code>pip3</code> are synonymous for the Python Installation Package for Python 3. However in some cases, <code>pip</code> will be directed to the Python Installation Package for Python 2 rather than Python 3. To check this, run in the terminal:</p> <pre><code>pip --version\n</code></pre> <p>If the output indicates you this Python Installation Package is for Python 2 and not Python 3, only install packages using the <code>pip3</code> name. </p> <p>For the rest of this documentation, <code>pip</code> will be used, however if your computer's <code>pip</code>  refers to Python 2 and not Python 3, use <code>pip3</code>  instead of <code>pip</code>. </p>"},{"location":"Programs_to_Install.html#packaging","title":"Packaging","text":"<p>The <code>packaging</code> program is also used in this program to check the versions of ASE that you are using for compatibility issues. The easiest way to install <code>packaging</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user packaging\n</code></pre>"},{"location":"Programs_to_Install.html#numpy","title":"Numpy","text":"<p>The <code>numpy</code> program is used in this program to perform matrix calculations, as well as used by <code>ase</code>. The easiest way to install <code>numpy</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user numpy\n</code></pre>"},{"location":"Programs_to_Install.html#scipy","title":"Scipy","text":"<p>The <code>scipy</code> program is used by the <code>ase</code> program. The easiest way to install <code>scipy</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user scipy\n</code></pre>"},{"location":"Programs_to_Install.html#matplotlib","title":"Matplotlib","text":"<p>The <code>matplotlib</code> program is used in this program to create the energy profile plots made by the <code>viewORCA neb_snap</code> module. The easiest way to install <code>matplotlib</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user matplotlib\n</code></pre>"},{"location":"Programs_to_Install.html#atomic-simulation-environment-ase","title":"Atomic Simulation Environment (ASE)","text":"<p>The Atomic Simulation Environment (ASE) is used to read and write molecule data, as well as to view molecules in a GUI. Read more about ASE here. </p> <p>The installation of ASE can be found on the ASE installation page, however from experience if you are using ASE for the first time, it is best to install ASE using <code>pip</code>, the package manager that is an extension of python to keep all your program easily managed and easy to import into your python. </p> <p>To install ASE using <code>pip</code>, perform the following in your terminal.</p> <pre><code>pip3 install --user --upgrade numpy scipy matplotlib\npip3 install --user --upgrade ase\n</code></pre> <p>Installing using <code>pip</code> ensures that ASE is being installed to be used by Python 3, and not Python 2. Installing ASE like this will also install all the requisite program needed for ASE. This installation includes the use of features such as viewing the xyz files of structure and looking at ase databases through a website. These should be already assessible, which you can test by entering into the terminal:</p> <pre><code>ase gui\n</code></pre> <p>This should show a GUI with nothing in it, as shown below:</p> This is a blank ase gui screen that you would see if enter ase gui into the terminal. <p>However, in the case that this does not work, we need to manually add a path to your <code>~/.bashrc</code> so you can use the ASE features externally outside python. Do the following; first enter the following into the terminal:</p> <pre><code>pip show ase\n</code></pre> <p>This will give a bunch of information, including the location of ase on your computer. For example, when I do this I get:</p> <pre><code>user@computer_name docs % pip show ase\nName: ase\nVersion: 3.26.0\nSummary: Atomic Simulation Environment\nHome-page: https://ase-lib.org/\nAuthor: \nAuthor-email: \nLicense-Expression: LGPL-2.1-or-later\nLocation: /Users/geoffreyweal/Library/Python/3.11/lib/python/site-packages\nRequires: matplotlib, scipy, numpy\nRequired-by: \n</code></pre> <p>Copy the <code>Location</code> line. If we remove the <code>lib/python/site-packages</code> bit and replace it with <code>bin</code>, this gives us the location of useful ASE programs. The example below is for Python 3.11. </p> <pre><code>/Users/geoffreyweal/Library/Python/3.11/bin\n</code></pre> <p>Next, add this to your <code>~/.bashrc</code> file as below:</p> <pre><code>############################################################\n# For ASE\nexport PATH=/Users/geoffreyweal/Library/Python/3.11/bin:$PATH\n############################################################\n</code></pre> <p>Write <code>source ~/.bashrc</code> in the terminal and press enter. Once you have done this, try to run <code>ase gui</code> in the terminal. This will hopefully show the ase gui and allow you to access the useful ASE programs through the terminal. </p>"},{"location":"Programs_to_Install.html#vieworca","title":"viewORCA","text":"<p>The <code>viewORCA</code> program is used throughout this procedure to allow the user to view various ORCA calculations. The easiest way to install <code>viewORCA</code> is though <code>pip</code>. Type the following into the terminal:</p> <pre><code>pip3 install --upgrade --user viewORCA\n</code></pre> Note <p>If you want to install <code>viewORCA</code> via an alternative method, see the <code>viewORCA</code> Installation Instructions. </p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html","title":"Step 1: Locally Optimise Reactants and Products","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>First we need to locally optimize the reactants and products. To do this:</p> <ol> <li>Make a <code>Reactants</code> and a <code>Products</code> folder</li> <li>Create a new folder for each reactant and product in your mechanistic step. </li> <li>Add the <code>.inp</code> file to each folder for performing local optimisations. Make sure you include the following into your <code>.inp</code> files for all your reactants and products:</li> </ol> <pre><code>!OPT FREQ TightOPT TightSCF defgrid2\n</code></pre> <p>Here, we perform a geometry optimisation to optimize the system. The tags here indicate you want to do the following: </p> <ul> <li><code>OPT</code>: Indicates you want ORCA to perform a local optimisation. </li> <li><code>FREQ</code>: Indicates you want ORCA to calculation the vibrational frequency for your molecule. <ul> <li>This is used to verify that your optimised structure is indeed a local minimum. </li> <li>This will also give you the Gibbs free energy for your molecule that you (may) want to report as your energy. </li> </ul> </li> <li><code>TightOPT</code>: Tells ORCA to tighten the convergence criteria for each geometric step. See the ORCA 6.1.0 Manual, page 618 for more info.</li> <li><code>TightSCF</code>: Tells ORCA to tighten the convergence criteria for each electronic step. </li> <li><code>defgrid2</code>: Indicates how fine we want the intergration grid to be (This is the default).</li> </ul> <p>NOTE 1</p> <p>I have set the electronic optimisation steps to be tight (<code>TightSCF</code>). This is just to make sure the electronic are well converged, but it may be a bit extreme. </p> <ul> <li>If you have problems, you can try using the normal convergence criteria for the electronic steps (<code>NormalSCF</code>)</li> </ul> <p>NOTE 2</p> <p>Click here for more information about other electronic convergence and interaction grid settings (besides <code>TightSCF</code> and <code>defgrid2</code>)</p> <p>An example of the complete <code>orca.inp</code> file for a local optimisation ORCA job is given below (also located here): </p> Example orca.inp file used to geometrically optimise the product structure<pre><code>!B3LYP DEF2-TZVP D3BJ \n!OPT FREQ TightOPT TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n* xyzfile 1 1 product.xyz \n</code></pre> <p>NOTE 3</p> <p>Make sure you include a newline or two at the end of your <code>orca.inp</code> file, otherwise ORCA will get confused and not run.</p> <p>The last line of the ORCA <code>inp</code> file contains the following: </p> <ol> <li>The input type for inputting the coordinates of your system.</li> <li>The overall charge of your system.</li> <li>The overall multiplcity of your system.</li> <li>If you use the <code>xyzfile</code> type, the xyz file of your system. </li> </ol> <p>Here, <code>xyzfile</code> allows you to import an xyz file into ORCA. You can add the xyz data directly in the <code>.inp</code> file, but I find having a separate <code>xyz</code> file is better because this allow you to look at the xyz file in a GUI like in atomic simulation environment (ASE). </p> <ul> <li>Include the <code>xyz</code> files of your reactant and product molecules in the <code>Reactant</code> and <code>Product</code> folders, respectively. </li> <li>If your reactants or products contain more than one molecule/chemical system, split them up and optimise them individually in their own individual folders. </li> </ul> What is the multiplicity of my system? <p>The multiplicity indicates what the total spin of the electrons in your system (reactants or products) is. This is based on the number of electrons are in your system, where the multiplicity is based on the \\(M = 2S + 1\\) rule (and where \\(S\\) is the total spin of your electrons): </p> <ul> <li>If you have an even number of electrons in your system, the multiplicity will be an odd number. The lowest value multiplicity is 1.</li> <li>If you have an odd  number of electrons in your system, the multiplicity will be an even number. The lowest value multiplicity is 2 (It can not be 0).</li> </ul> <p>If you want to easily figure out if you should have an even or odd multiplicity, you can use:</p> <pre><code>viewORCA multi filepath --charge=charge\n</code></pre> <p>where </p> <ul> <li><code>filepath</code> is the path to the <code>xyz</code> file of your system, and </li> <li><code>--charge</code> is the overall charge of your system (if <code>--charge</code> is not given, the default given is 0). </li> </ul> <p>See more about <code>viewORCA multi</code> by clicking here for the <code>multi</code> entry in the <code>viewORCA</code> manual. </p> <p>Note: Your multiplicity may be dependent on if you have transition metals in your system. For example, 3d transition metals can have valence electrons in degenerate energy levels. </p> <p>Examples: Based on crystal field theory, octahedral transition metal complexes have 3 lower energy t<sub>2g</sub> orbitals, and 2 higher energy e<sub>g</sub> orbitals. Thinking about this orbital scheme, consider the following examples:</p> <ul> <li> <p>Example 1: Octahedral Cu(I) has 10 valence electrons in the 3d orbitals. 6 of these electrons live in the t<sub>2g</sub>, while the other 4 electrons live in the e<sub>g</sub> orbitals. Therefore, the total electron spin is \\(0\\), giving a multiplicity of \\(M = 2(0) + 1 = 1\\).</p> </li> <li> <p>Example 2: Octahedral Cu(II) complexes have 9 valence electrons. 6 of these electrons live in the t<sub>2g</sub>, while the other 3 electrons live in the e<sub>g</sub> orbitals. Therefore, the total electron spin is \\(1/2\\), giving a multiplicity of \\(M = 2(1/2) + 1 = 2\\).</p> </li> <li> <p>Example 3: Octahedral Fe(III) complexes have 5 valence electrons. In the high spin case, 3 of these electrons these live individually in each of the 3 t<sub>2g</sub>, while the other 2 electrons live in the 2 e<sub>g</sub> orbitals. Therefore, the total electron spin is \\(5/2\\), giving a multiplicity of \\(M = 2(5/2) + 1 = 6\\).</p> </li> </ul> <p> 3d orbtials of octahedral Cu(I) (left), Cu(II) (middle) and Fe(III) (right) based on crystal field theory. </p> <p>Submit the job to slurm (if you use slurm) using the <code>submit.sl</code> file:</p> Example of a submit.sl file for submitting ORCA jobs to slurm<pre><code>#!/bin/bash -e\n#SBATCH --job-name=A3_Step1_Products\n#SBATCH --ntasks=32\n#SBATCH --mem-per-cpu=2500MB\n#SBATCH --partition=genoa,milan\n#SBATCH --time=3-00:00     # Walltime\n#SBATCH --output=slurm-%j.out      # %x and %j are replaced by job name and ID\n#SBATCH --error=slurm-%j.err\n#SBATCH --nodes=1 # OpenMPI can have problems with ORCA over multiple nodes sometimes, depending on your system.\n\n# Load ORCA\nmodule load ORCA/6.1.0-f.0-OpenMPI-4.1.5\n\n# ORCA under MPI requires that it be called via its full absolute path\norca_exe=$(which orca)\n\n# Don't use \"srun\" as ORCA does that itself when launching its MPI process.\n${orca_exe} orca.inp &gt; output.out\n</code></pre> <p>NOTE 4</p> <p>While ORCA has been told to use <code>maxcore</code> = 2000 (MB) * 32 = 64 GB in the <code>.inp</code> file, we have told slurm to reserve <code>2500MB</code> * 32 = 80 GB of memory. It is a good idea to give your ORCA job a bit of extra memory in slurm just in case ORCA accidentally goes over it's allocated RAM. Here, I have abitrarily given this job 500 MB more RAM per CPU just in case. </p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#outputs-from-orca-for-example","title":"Outputs from ORCA for Example","text":"<p>While ORCA is running, it will output several files, including an <code>output.out</code> file, an <code>orca.xyz</code> file, and an <code>orca_trj.xyz</code> file.</p> <ul> <li><code>output.out</code>: This file contains the details about how ORCA ran. This includes the vibrational frequency data to check if the locally optimised structure is in fact a local minimum.</li> <li><code>orca.xyz</code>: This is the locally optimised molecule. </li> <li><code>orca_trj.xyz</code>: This file shows how ORCA locally optimised the molecule. Type <code>viewORCA opt</code> into the terminal to view how the molecule was optimised, including an energy profile. </li> </ul> <p>Once ORCA has finished, you should do the following checks:</p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#check-1-look-at-your-molecule-and-the-energy-profile-and-make-sure-it-looks-ok","title":"Check 1: Look at your molecule and the energy profile and make sure it looks ok","text":"<p>The first thing to do is to look at your molecule and check if it looks sensible with your chemical intuition. You can do this by opening up the <code>orca.xyz</code> in your favourite GUI. I like to use atomic simulation environment (ASE). To look at the molecule and its energy profile:</p> <ol> <li>Open a new terminal</li> <li><code>cd</code> into the optimisation folder</li> <li>Type <code>viewORCA opt</code> into the terminal</li> </ol> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Example/Step1_Geo_Opt/Products\n\n# View the optimisation \nviewORCA opt\n</code></pre> <p>NOTE 1</p> <p>If <code>viewORCA opt</code> does not work, type <code>ase gui orca_trj.xyz</code> into the terminal instead of <code>viewORCA opt</code>. </p> <p>NOTE 2</p> <p><code>viewORCA opt</code> will also create a xyz file called <code>OPT_images.xyz</code> that you can copy and view on your own computer. </p> <ul> <li>If you just want to create the <code>OPT_images.xyz</code> file and not view the optimisation, type into the terminal <code>viewORCA opt --view False</code> (which will create the <code>OPT_images.xyz</code> file). </li> </ul> <p>Here, you want to check that the molecule looks ok from your chemical and physical intuition. Here is an example of what the optimised molecule looks like (the <code>orca.xyz</code> file here). If we look at the initial molecule geometry (by typing <code>viewORCA opt</code> or <code>ase gui product.xyz</code> into the terminal), we can see how the molecule has changed after being geometrically optimised: </p> Image of optimisation process by ORCA. <p><code>viewORCA opt</code> will also show you the energy profile for this optimisation. </p> Energy profile of optimisation process by ORCA."},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#check-2-did-the-geometry-optimisation-converge-successfully","title":"Check 2: Did the geometry optimisation converge successfully","text":"<p>You want to look for a table in the <code>output.out</code> file for a table with the title <code>Geometry convergence</code>. There will be many of these tables, as one is given for each geometric step performed. </p> <ul> <li>You want to look at the last <code>Geometry convergence</code> table in the output file as this will display the information for the latest geometrically optimised step. An example for the <code>Products</code> is given below:</li> </ul> Extract of geometry convergence information from the ORCA output file<pre><code>                                .--------------------.\n          ----------------------|Geometry convergence|-------------------------\n          Item                value                   Tolerance       Converged\n          ---------------------------------------------------------------------\n          Energy change      -0.0000121554            0.0000010000      NO\n          RMS gradient        0.0000126838            0.0000300000      YES\n          MAX gradient        0.0000468077            0.0001000000      YES\n          RMS step            0.0001259501            0.0006000000      YES\n          MAX step            0.0005455187            0.0010000000      YES\n          -------------------------------------------------------------------------\n          ........................................................\n          Max(Bonds)      0.0000      Max(Angles)    0.01\n          Max(Dihed)        0.03      Max(Improp)    0.00\n          ---------------------------------------------------------------------\n\n       Everything but the energy has converged. However, the energy\n       appears to be close enough to convergence to make sure that the\n       final evaluation at the new geometry represents the equilibrium energy.\n       Convergence will therefore be signaled now\n\n\n                    ***********************HURRAY********************\n                    ***        THE OPTIMIZATION HAS CONVERGED     ***\n                    *************************************************\n</code></pre> <p>In this example, you can see that the majority of the items of interest have converged, and ORCA has happy that the convergence criteria have been met. ORCA also tells you this by giving you a <code>HURRAY</code> message as well as a <code>THE OPTIMIZATION HAS CONVERGED</code> message (as you can see in above). </p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#check-3-does-the-molecule-have-any-non-negative-vibrational-frequencies","title":"Check 3: Does the molecule have any non-negative vibrational frequencies","text":"<p>After performing a local optimisation, it is important that you look at the vibrational frequencies that are calculated. These are the frequencies that you could see in an IR or Raman spectra. You want to look through your ORCA <code>output.out</code> file for a heading called <code>VIBRATIONAL FREQUENCIES</code>. We want to make sure that all the frequencies are non-negative. This means we are in a local energy well. </p> <ul> <li>If one or more frequency is negative, this means we are not in a local minimum. In this case, you need to tighten the optimisation, or need to look at your molecule and see if any part of it structurally does not make sense with your chemical intuition. </li> </ul> <p>In the example below (for <code>Products</code>), you can see that there are no non-negative frequencies from the <code>FREQ</code> calculation, therefore we are in a local energy well: </p> Extract of vibrational frequency information from the ORCA output file<pre><code>-----------------------\nVIBRATIONAL FREQUENCIES\n-----------------------\n\nScaling factor for frequencies =  1.000000000  (already applied!)\n\n     0:       0.00 cm**-1\n     1:       0.00 cm**-1\n     2:       0.00 cm**-1\n     3:       0.00 cm**-1\n     4:       0.00 cm**-1\n     5:       0.00 cm**-1\n     6:      44.93 cm**-1\n     7:      69.32 cm**-1\n     8:     145.14 cm**-1\n     9:     225.50 cm**-1\n    10:     280.47 cm**-1\n    11:     304.99 cm**-1\n    12:     391.81 cm**-1\n    13:     402.73 cm**-1\n    14:     415.60 cm**-1\n    15:     472.47 cm**-1\n    16:     496.43 cm**-1\n    17:     584.01 cm**-1\n    18:     628.47 cm**-1\n    19:     679.74 cm**-1\n    20:     722.32 cm**-1\n    21:     784.15 cm**-1\n    22:     793.27 cm**-1\n    23:     809.82 cm**-1\n    24:     845.31 cm**-1\n    25:     953.98 cm**-1\n    26:     980.92 cm**-1\n    27:     997.22 cm**-1\n    28:    1018.49 cm**-1\n    29:    1030.84 cm**-1\n    30:    1046.46 cm**-1\n    31:    1103.59 cm**-1\n    32:    1137.99 cm**-1\n    33:    1187.92 cm**-1\n    34:    1210.32 cm**-1\n    35:    1238.50 cm**-1\n    36:    1312.26 cm**-1\n    37:    1358.75 cm**-1\n    38:    1377.48 cm**-1\n    39:    1481.29 cm**-1\n    40:    1515.76 cm**-1\n    41:    1542.98 cm**-1\n    42:    1608.70 cm**-1\n    43:    1632.82 cm**-1\n    44:    1646.95 cm**-1\n    45:    1845.23 cm**-1\n    46:    3184.93 cm**-1\n    47:    3187.86 cm**-1\n    48:    3191.70 cm**-1\n    49:    3193.64 cm**-1\n    50:    3204.14 cm**-1\n    51:    3209.64 cm**-1\n    52:    3487.75 cm**-1\n    53:    3585.96 cm**-1\n</code></pre>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#troubleshooting-geometric-optimisation-opt-calculations","title":"Troubleshooting Geometric Optimisation (<code>Opt</code>) Calculations","text":"<p>Here are some troubleshooting tips for performing this optimisation step.</p> <p>Note</p> <p>Also read more about electronic convergence issues that are commonly encountered during geometric optimisation jobs in from the ORCA Input Library by clicking here.</p> <ul> <li>The ORCA Input Library is generally a great source of information about performing calculations in ORCA.</li> </ul> <p>Info</p> <p>If you have any issues about this step, raise a <code>New issue</code> at the Issues section by clicking here.</p>"},{"location":"Step_1_Locally_Optimise_Reactant_and_Product.html#orca-would-not-converge-but-reached-the-maximum-number-of-optimization-cycles","title":"ORCA would not <code>converge but reached the maximum number of optimization cycles.</code>","text":"<p>A common problem that can arise is the message from ORCA saying that it could not converge because it had reached the maximum number of optimisation cycles.</p> <pre><code>    ----------------------------------------------------------------------------\n                                   ERROR !!!\n       The optimization did not converge but reached the maximum\n       number of optimization cycles.\n       As a subsequent Frequencies calculation has been requested\n       ORCA will abort at this point of the run.\n       Please restart the calculation with the lowest energy geometry and/or\n       a larger maxiter for the geometry optimization.\n    ----------------------------------------------------------------------------\n</code></pre> <p>This indicates that the electronic step could not converged for the last geometric step. This means that ORCA could not find a way to optimise the molecular orbitals for this geometric step. This is a very common issue. In this case, you can replace your initial structure with the last optimised structure given by ORCA. Do this by changing the name of the input file in the <code>orca.inp</code> file from <code>reactant.xyz</code> to <code>orca.xyz</code></p> <pre><code>* xyzfile 1 1 orca.xyz \n</code></pre> <p>However, before proceeding you should check the initial structure you gave to ORCA. </p> <ul> <li>The <code>converge but reached the maximum number of optimization cycles.</code> problem can arise because the initial structure you gave to ORCA was not a good starting point. </li> <li>ORCA requires that you apply your chemical intuition to your system before you run it. Otherwise it can fail. </li> </ul> <p>For example, consider that we want to optimise the following chemical system, where Cu<sup>+</sup> coordinates to the nitrogen in benzylamine: </p> Optimised Reactant <p>If we wanted to obtain this chemical system, we would want to make sure that most of the atoms are roughly in a good bonding position. This is a good example of a good structure to begin with:</p> Initial Structure - Reactant <p>Below is an example of a structure that might have convergence issues because the Cu<sup>+</sup> atom is very far away from the nitrogen. Generally, it is best not to combine separate molecules/compounds in an ORCA calculations unless they are well separated and are not meant to come together for geometry optimisations. This does not apply to <code>SCAN</code> calculations, where you might want to separate two components from each other (For example, separate Cu<sup>+</sup> from benzylamine). We will talk about <code>SCAN</code> calculations in the next section. </p> Initial Structure - Reactant - Not ideal <p>In this case, it would be best to try using a better initial structure where the Cu<sup>+</sup> atom is coordinated to the benzylamine molecule. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/index.html","title":"Step 2: Examine the Reaction Pathway","text":"<p>Next, we want to determine what the path that the mechanistic step takes and obtain the transition state for this step. </p> <ul> <li>If you have two or more reactants/products that you would like to react together, you will first want to append them into the same xyz file.</li> <li>See Step 2A - Prepare Reaction System to learn more about preparing the xyz file for your reaction system when dealing with two or more reactants/products.</li> </ul> <p>Once you have prepared your reaction system or you are happy with the xyz file that you will use, you will want to examine the reaction pathway for your mechanistic step of interest. There are two methods for doing this:</p> <ul> <li> <p>Step 2Ba - The SCAN method</p> <p>This method works by gradually changing the distance between two atoms (or the bonding angle between three atoms) to force atoms to rearrange or bonds to form/break.</p> <p> Click here to learn how to run a SCAN job</p> </li> <li> <p>Step 2Bb - The Nudged Elastic Band (NEB) method</p> <p>This method works by tracing a number of images across the mechanism from reactant to product, and optimising the images across the potential energy surface (PES). </p> <p> Click here to learn how to run a NEB job</p> </li> </ul> <p>Choose one of these methods for this step.</p> <p>Recommendation</p> <p>I usually perform the SCAN method rather than the NEB method. This is because the NEB method is a bit more involved and requires some preprocessing before running the actual NEB calculation. The SCAN method is a bit more straight-forward. </p> <ol> <li>Try running the SCAN method first.</li> <li>If you have difficulty using the SCAN method for your system, or you think your mechanism is more complicate than a single bond forming/breaking event, switch to using the NEB method. </li> </ol>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html","title":"Step 2A - Prepare The Reaction System","text":"<p>Consider that you have a mechanistic step that contains two or more reactants/products. To perform Step 2 (either by performing a SCAN or Nudged Elastic Band calculation), you will need to place all your reactants/all your products into the same xyz file. </p> <p>This section will look at how to append multiple chemical systems in various xyz files together so that you can examine the reaction pathway in either Step 2Ba - SCAN or Step 2Bb - Nudged Elastic Band. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html#step-2a1-move-the-centre-of-masses-of-your-chemical-systems","title":"Step 2A.1 - Move the Centre of Masses of your Chemical Systems","text":"<p>Before we combine multiple chemical systems together, we need to make sure that we dont accidentally place one molecule in the middle of another molecule. The easiest way to solve this problem is to move the centre of mass of your chemical systems some distance apart from each other. You can do this by using the <code>viewORCA move_com</code> module. To run this module: </p> <ol> <li>Change directory into the folder containing the <code>xyz</code> files of the chemical systems you want to change the centre of masses of.</li> <li>Run the <code>viewORCA move_com filepath --move_com_to=move_com_to</code> module as shown below, where <code>filepath</code> is the path to the <code>xyz</code> file you would like to move the centre of mass of, and <code>move_com_to</code> is the \\((x,y,z)\\) coordinates where you would like to move the centre of mass of your system to. <ul> <li>Note: The format of <code>move_com_to</code> should be <code>x,y,z</code>. i.e: <code>move_com_to=x,y,z</code></li> </ul> </li> </ol> <pre><code># First, change directory to the folder that contains the xyz files that yuou want to change the centre of masses of.\ncd folder_containing_xyz_files\n\n# Second, move the centre of mass of your chemical system\nviewORCA move_com filepath --move_com_to=move_com_to\n</code></pre> <p>The <code>viewORCA move_com</code> module will create a new xyz file that contains <code>move_com_to</code> in the filename. This <code>xyz</code> file will contain your chemical system with its centre of mass moved to move_com_to.</p> <p>Example</p> <p>Suppose that we have a Cu(II)-Benzylimine that we want to react with Benzylamine. We decide that we want the Cu(II)-Benzylimine to be centred at the origin while we want Benzylamine to be centered at \\((10.0, 0.0, 0.0)\\). To do this we would do the following in the terminal:</p> <pre><code># First, change directory to the folder that contains the Cu(II)-Benzylimine and Benzylamine xyz files.\ncd folder_containing_xyz_Benzylamine.xyz\n\n# Second, move the centre of mass of Cu(II)-Benzylimine to the origin (0,0,0).\nviewORCA move_com Cu_II-BnzImine_1+.xyz --move_com_to=0,0,0\n\n# Third, move the centre of mass of Benzylamine to (10,0,0).\nviewORCA move_com Benzylamine.xyz --move_com_to=10,0,0\n</code></pre> <p><code>viewORCA move_com</code> will move the centre of masses of Cu(II)-Benzylimine and Benzylamine and save them into the files called <code>Cu_II-BnzImine_1+_com_0_0_0.xyz</code> and <code>Benzylamine_com_10.0_0.0_0.0.xyz</code>. This example is given in Examples/Step2_Find_TS/Step_2A/Step_2A1_Move_COM.</p> <p> Image of Cu(II)-Benzylimine before and after its centre of mass is moved. </p> <p> Image of Benzylamine before and after its centre of mass is moved. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html#step-2a2-combine-your-xyz-files-into-one-chemical-system","title":"Step 2A.2 - Combine your <code>xyz</code> files into One Chemical System","text":"<p>Now that we have moved our molecules in Step 2A.1, we can now combine them together knowing that they wont accidentally merge together. There are two ways to do this:</p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html#option-1-use-vieworca-combine","title":"Option 1: Use <code>viewORCA combine</code>","text":"<p>The first option is to use <code>viewORCA combine</code> to combine multiple <code>xyz</code> files together. To do this:</p> <ol> <li>In the terminal, change directory into the directory containing the xyz files of the chemical systems you want to combine together. </li> <li> <p>type <code>viewORCA combine filepath_for_system_1 filepath_for_system_2 filepath_for_system_3 ...</code> into the terminal, where:</p> <ul> <li><code>filepath_for_system_1, filepath_for_system_2, ...</code> are the paths to all the xyz files you would like to combine together.  </li> </ul> </li> </ol> <p><code>viewORCA combine</code> will print the shortest distances between the chemical system you combine together so you know they are a good distance from each other. If you see that any distance is less than 3.0 \u00c5, you may have accidentally merged your chemical systems together. </p> <p>The output file will be save into your current working directory as <code>overall_chemical_system.xyz</code>. Check you have not accidentally merged your chemical systems by looking at the xyz file in a GUI (like Avogadro or <code>ase gui</code>). Once you are happy with the contents of this file, change the filename of this <code>xyz</code> file to what you want it to be named. </p> <p>Example</p> <p>Say we want to combine an <code>xyz</code> file containing a Cu(II)-benzylimine molecule (with centre of mass = \\((0.0, 0.0, 0.0)\\)) with another <code>xyz</code> file containing a benylamine molecule (with centre of mass = \\((10.0, 0.0, 0.0)\\)). We would run the code below to achieve this:</p> <pre><code># First, change directory into the folder containing your xyz files you want to combine together. \ncd path_to_xyz_files\n\n# Second, run \"viewORCA move_com\".\nviewORCA combine Benzylamine_com_10.0_0.0_0.0.xyz Cu_II-BnzImine_1+_com_0_0_0.xyz\n</code></pre> <p><code>viewORCA combine</code> will print the shortest distances between the chemical system you combine together so you know they are a good distance from each other. If you see that any distance is less than 3.0 \u00c5, you may have accidentally merged your chemical systems together. </p> <p>You will also see a new file has been made called <code>overall_chemical_system.xyz</code> that contains your overall chemical system. This example is given in Examples/Step2_Find_TS/Step_2A/Step_2A2_Combine.</p> <p> Combining Benzylamine and Cu(II)-benzylimine into one xyz file. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2A_Prepare_The_Reaction_System.html#option-2-copy-the-coordinates-of-one-xyz-file-into-another-xyz-file","title":"Option 2: Copy the coordinates of one <code>xyz</code> file into another <code>xyz</code> file","text":"<p>The other way to combine multiple <code>xyz</code> files together is to copy and paste each <code>xyz</code> file one after the other in a new xyz <code>file</code>. This is what is happening in Option 1: Use <code>viewORCA combine</code>, but done automatically by <code>viewORCA</code>. </p> <ul> <li>If you do this, make sure you change the first line in your <code>xyz</code> file to the total number of atoms in your combined system.</li> </ul> <p>Example</p> <p>Consider now that we want to manually combine the xyz file for Cu(II)-benzylimine molecule (with centre of mass = \\((0.0, 0.0, 0.0)\\)) with another <code>xyz</code> file containing a benylamine molecule (with centre of mass = \\((10.0, 0.0, 0.0)\\)). </p> Benzylamine_com_10.0_0.0_0.0.xyz<pre><code>17\nProperties=species:S:1:pos:R:3 Energy:=T 18.1285528=T pbc=\"F F F\"\nC        8.82798764      -0.72923719      -0.21980796\nC        9.64720764       0.40132281      -0.05602796\nC        9.37118764      -2.01621719      -0.16348796\nC       10.73913764      -2.18955719       0.05608204\nC       11.02826764       0.21373281       0.16385204\nC       11.56615764      -1.07620719       0.21909204\nH       12.62668764      -1.21243719       0.38803204\nH       11.15850764      -3.18639719       0.09917204\nH       11.69849764       1.05282281       0.29167204\nH        7.76473764      -0.61273719      -0.39123796\nH        8.73069764      -2.87946719      -0.29048796\nC        9.00217764       1.76893281      -0.12848796\nN        9.95429764       2.85972281       0.06699204\nH        8.20434764       1.83886281       0.64416204\nH        8.53106764       1.88010281      -1.12939796\nH       10.30117764       2.83572281       1.05381204\nH        9.44922764       3.76619281      -0.06206796\n</code></pre> Cu_II-BnzImine_1+_com_0_0_0.xyz<pre><code>15\nProperties=species:S:1:pos:R:3 Energy:=T 12.9406666=T pbc=\"F F F\"\nC       -2.46950657      -0.54117045      -0.11252192\nC       -1.07283657      -0.69096045      -0.09875192\nC       -0.52041657      -1.97965045      -0.22782192\nC       -1.35452657      -3.09358045      -0.36770192\nC       -2.74232657      -2.93319045      -0.38011192\nC       -3.29917657      -1.65825045      -0.25265192\nH       -2.91808657       0.43999955      -0.01486192\nH        0.55217343      -2.12735045      -0.22082192\nH       -0.92436657      -4.08190045      -0.46654192\nH       -3.38600657      -3.79657045      -0.48847192\nH       -4.37448657      -1.53509045      -0.26240192\nC       -0.21642657       0.50638955       0.05072808\nN        1.06287343       0.41467955       0.06831808\nH       -0.67253657       1.48676955       0.14814808\nCu       2.15844343       2.02501955       0.26814808\n</code></pre> <p>To do this, we open a new file in our text editor (such as <code>Sublime</code>), and copy the elements and positions of all the atoms in Benzylamine_com_10.0_0.0_0.0.xyz, then do the same for <code>Cu_II-BnzImine_1+_com_0_0_0.xyz</code>. </p> <p>At the top of this new file, we will need to add two lines:</p> <ol> <li>The first line indicates the number of atoms in this combined system, which in this case is <code>32</code></li> <li>The second line indicates what information about the atoms given in this file (i.e., the element and \\((x,y,z)\\) position). This should be <code>Properties=species:S:1:pos:R:3 pbc=\"F F F\"</code> (<code>pbc</code> here indicates there is no periodic boundary condition set).</li> </ol> overall_chemical_system.xyz<pre><code>32\nProperties=species:S:1:pos:R:3 pbc=\"F F F\"\nC        8.82798764      -0.72923719      -0.21980796\nC        9.64720764       0.40132281      -0.05602796\nC        9.37118764      -2.01621719      -0.16348796\nC       10.73913764      -2.18955719       0.05608204\nC       11.02826764       0.21373281       0.16385204\nC       11.56615764      -1.07620719       0.21909204\nH       12.62668764      -1.21243719       0.38803204\nH       11.15850764      -3.18639719       0.09917204\nH       11.69849764       1.05282281       0.29167204\nH        7.76473764      -0.61273719      -0.39123796\nH        8.73069764      -2.87946719      -0.29048796\nC        9.00217764       1.76893281      -0.12848796\nN        9.95429764       2.85972281       0.06699204\nH        8.20434764       1.83886281       0.64416204\nH        8.53106764       1.88010281      -1.12939796\nH       10.30117764       2.83572281       1.05381204\nH        9.44922764       3.76619281      -0.06206796\nC       -2.46950657      -0.54117045      -0.11252192\nC       -1.07283657      -0.69096045      -0.09875192\nC       -0.52041657      -1.97965045      -0.22782192\nC       -1.35452657      -3.09358045      -0.36770192\nC       -2.74232657      -2.93319045      -0.38011192\nC       -3.29917657      -1.65825045      -0.25265192\nH       -2.91808657       0.43999955      -0.01486192\nH        0.55217343      -2.12735045      -0.22082192\nH       -0.92436657      -4.08190045      -0.46654192\nH       -3.38600657      -3.79657045      -0.48847192\nH       -4.37448657      -1.53509045      -0.26240192\nC       -0.21642657       0.50638955       0.05072808\nN        1.06287343       0.41467955       0.06831808\nH       -0.67253657       1.48676955       0.14814808\nCu       2.15844343       2.02501955       0.26814808\n</code></pre>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html","title":"Step 2Ba: The SCAN Method","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>In a SCAN calculation, we want to map how a reaction proceeds by gradually changing the distance between two atoms. The SCAN calculation works as follows:</p> <ol> <li>Perform a geometric optimisation on the chemical system, where the distance between two atoms are fixed.</li> <li>Repeat the geometric optimisation on the same chemical system, where the position of the two atoms is changed by \\(dx\\).</li> <li>Repeat this until the distance between the two atoms changes to the desired final length. </li> </ol> <p>To perform a SCAN, we first include this line in our input file:</p> <pre><code>!OPT NormalOPT TightSCF defgrid2 # Try TightOPT if you have convergence problems. \n</code></pre> <p>The tags here indicate you want to do the following: </p> <ul> <li><code>OPT</code>: Indicates you want ORCA to perform local optimisations during your SCAN calculation. </li> <li><code>TightSCF</code>: Tells ORCA to tighten the convergence criteria for each electronic step. </li> <li><code>defgrid2</code>: Indicates how fine we want the intergration grid to be (This is the default)</li> <li><code>NormalOPT</code>: Indicate we want to use normal geometric convergence settings. </li> </ul> <p>Tip</p> <p>For these calculations we want to use <code>NormalOPT</code> rather than <code>TightOPT</code> because we are only wanting to get a good idea of what the transition state looks like. </p> <ul> <li><code>NormalOPT</code> is ideal for SCAN calculations as it is the usual convergence criteria for performing optimisations, and will run faster than using <code>TightOPT</code>. </li> <li>However, if you have problems with convergence issues, you can try using <code>TightOPT</code>. See the ORCA 6.1.0 Manual, page 618 for more information.</li> </ul> <p>We also include the following lines:</p> Extra lines required for a SCAN calculation<pre><code>%GEOM \n    SCAN B atom_index_1 atom_index_2 = initial_distance, final_distance, linespace+1 END \nEND\n</code></pre> <p>where:</p> <ul> <li><code>atom_index_1</code>: This is the index of the first atom. Obtain this using <code>ase gui</code>.</li> <li><code>atom_index_2</code>: This is the index of the second atom. Obtain this using <code>ase gui</code>.</li> <li><code>initial_distance</code>: The initial distance between the two atoms. Get this by measuring the distance between the two atoms in your system using a GUI (such as avogadro or <code>ase gui</code>) and record it here.</li> <li><code>final_distance</code>: The final distance between the two atoms. </li> <li><code>linespace</code>: The number of SCAN steps you want to perform. </li> </ul> <p>An example for these lines is given below:</p> Extra lines required for a SCAN calculation<pre><code>%GEOM \n    SCAN B 11 16 = 3.245, 0.745, 126 END \nEND\n</code></pre> <p>In this example, we have told ORCA to begin by setting the distance between atom 11 and 16 to 3.245 \u00c5, and then decrease the distance between these two atoms to 0.745 \u00c5 in increments of \\(\\frac{3.245-0.745}{126-1} = 0.02\\) \u00c5. </p> <p>NOTE 1</p> <p>You will want to measure the initial distance between your two atoms using a GUI like <code>ase gui</code>. This is the value you want to put in for the initial bond distance. </p> <ul> <li>This is how I got the bond distance between atom 11 and 16 to 3.245 \u00c5 for this example. </li> </ul> <p>NOTE 2</p> <p>ORCA counts atoms starting from 0. This means that in some GUIs (like GView), atom 11 here is atom 12 in GView. In the ASE GUI and all the programs given here, atoms numbers are equal to ORCA. I.e.: atom 11 in the ASE GUI means atom 11 in ORCA. </p> <p>NOTE 3</p> <p>We have set the number of steps to perform to 126 rather than 125. This is because we are including the endpoint in our SCAN, and I want the increments to be spaced by a rational value (i.e.: \\(\\frac{3.245-0.745}{126-1} = 0.02\\) \u00c5 step size). </p> <ul> <li>This is just a personal preference of mine, and is not a hard rule. </li> </ul> <p>In this example, we are looking at how a Cu atom could insert itself into a C-H bond. The <code>orca.inp</code> file for this example is given below (also located here): </p> Example orca.inp file used to perform a SCAN calculation<pre><code>!B3LYP DEF2-TZVP D3BJ\n!OPT NormalOPT TightSCF defgrid2 # Try TightOPT if you have convergence problems. \n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000\n%GEOM \n    SCAN B 11 16 = 3.245, 0.745, 126 END \nEND\n* xyzfile 1 1 opt_product.xyz\n</code></pre>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#outputs-from-orca","title":"Outputs from ORCA","text":"<p>As well as the <code>output.out</code> and <code>orca_trj.xyz</code> files, ORCA will also give:</p> <ul> <li>A series of files called <code>orca.001.xyz</code>, <code>orca.002.xyz</code>, <code>orca.003.xyz</code>, ... up to <code>orca.126.xyz</code>. These are the steps in the SCAN process. </li> </ul> <p>NOTE</p> <p>The <code>orca_trj.xyz</code> contains the xyz files for every geometric optimisation across all SCAN steps, so it can be unhelpful to view on its own. However, keep it as it will be used by the <code>viewORCA</code> program.</p> <p>To view the SCAN mechanism and the energy path, type <code>viewORCA scan</code> in the terminal and hit enter. This will load a program that will allow you to see how the SCAN calculation performed your mechanism, along with the energy profile. </p> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Examples/Step2_Find_TS/SCAN\n\n# View the SCAN calculation \nviewORCA scan\n</code></pre> <p>NOTE 1</p> <p><code>viewORCA scan</code> will also create a xyz file called <code>SCAN_images.xyz</code> that you can copy and view on your own computer. </p> <ul> <li>If you just want to create the <code>SCAN_images.xyz</code> file, type into the terminal <code>viewORCA scan --view False</code> (which will create the <code>SCAN_images.xyz</code> file without launching <code>ase gui</code>). </li> </ul> <p>Once you run <code>viewORCA scan</code>, you will get a GUI that shows you the following SCAN pathway:</p> GIF of the SCAN job <p>The energy profile for this example is given below:</p> Energy Profile of the SCAN job <p>NOTE 2</p> <p>The energy goes up at the end because the hydrogen atom is probably getting too close to the carbon atom. We can ignore this part of the SCAN (after around step 110), as it is not relavant to us for finding the transition state for this mechanistic step. </p> <p>The easiest way to use this GUI is to zoom in on the part of the energy profile looks like the transition state (by clicking on the  button), and from this determine the image this corresponds to by looking at the x axis. Move the cursor over the highest point along the energy profile, and read the x value:</p> SCAN Energy Profile - Zoomed in on Transition State <p>This is what the given transition state looks like in this example:</p> Energy Profile of the SCAN job <p>This is a promising transition state, but we need to proceed with steps 3 and 4 to make sure it is ok. </p> <p>Once ORCA has finished and you have viewed your SCAN pathway and obtained your transition state, you should do the following check:</p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#check-does-the-scan-path-make-sense-chemically-and-physically","title":"Check: Does the SCAN path make sense chemically and physically","text":"<p>You will want to look at the SCAN path and check if it chemically and physically makes sense. If it does not, you need to redo the SCAN and try something else, like making the two atoms contract closer to each other rather than stretch, or maybe try contracting or expanding the distance between other atoms.  </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#advice-about-scans","title":"Advice about SCANs","text":"<p>In this example, I forced the SCAN to gradually decrease the distance between atom 11 (C) and atom 16 (H). However, this is not the only way I could have performed this SCAN. </p> <ul> <li>For example, I could have started with the Cu atom bonded to the N atom, and gradually decrease the distance between atoms 11 (C) and 17 (Cu) to force them to form a bond.</li> <li>I decided to start with a C-Cu-H bond and force the C and H to come together because I thought this was the best way to obtain the transition state for this mechanistic step.</li> <li>It is not uncommon that you need to try a few different SCAN paths to get the transition state you are looking for. </li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#what-should-i-do-if-i-need-to-restart-a-scan-run","title":"What should I do if I need to restart a SCAN run","text":"<p>Sometimes a SCAN job may fail. However, rather than resetting the SCAN job from beginning, you may want your SCAN job to resume from the last converged SCAN image. </p> <p>If you want to restart the SCAN job from the last converged image, here is a guide to how to do this (click here to see the example files for this procedure in Github):</p> <ol> <li> <p>If you are restarting your SCAN job for the first time: Make a new folder called <code>SCAN_1</code>, and move all your SCAN files into this folder. Do this by running the lines below in your terminal:</p> Make a new SCAN folder and place all SCAN files into it<pre><code>mkdir SCAN_1\nmv -v * SCAN_1\n</code></pre> <p>Note</p> <p>You will see a message like this when you run the <code>mv -v * SCAN_1</code> command. </p> <pre><code>mv: cannot move \u2018SCAN_1\u2019 to a subdirectory of itself, \u2018SCAN_1/SCAN_1\u2019\n</code></pre> <p>This is normal and expected. Ignore this issue. </p> </li> <li> <p>Make a new folder called <code>SCAN_2</code>:</p> Make a new SCAN folder<pre><code>mkdir SCAN_2\n</code></pre> </li> <li> <p>Copy the ORCA input file, slurm submit file, and the last converged SCAN xyz file. This is the latest numbered xyz file. An example of this is given below:</p> Copy SCAN file from the previous SCAN job over to the new SCAN folder<pre><code>cp -rv SCAN_1/orca.inp     SCAN_2/orca.inp\ncp -rv SCAN_1/submit.sl    SCAN_2/submit.sl\ncp -rv SCAN_1/orca.059.xyz SCAN_2/orca.059.xyz\n</code></pre> </li> <li> <p>Change directory into the new SCAN folder, then change the name of the last converged SCAN xyz file to another name, such as <code>last_converged_SCAN_image_restart.xyz</code></p> Copy SCAN file from the previous SCAN job over to the new SCAN folder<pre><code>cd SCAN_2\nmv orca.059.xyz last_converged_SCAN_image_restart.xyz\n</code></pre> </li> <li> <p>Open the copied <code>orca.inp</code> file, and make two changes to this file</p> <ol> <li> <p>Change the name of the xyz file give in in the <code>xyzfile</code> line to <code>last_converged_SCAN_image_restart.xyz</code></p> <pre><code>* xyzfile 1 1 last_converged_SCAN_image_restart.xyz\n</code></pre> </li> <li> <p>In the <code>GEOM</code> section: </p> <ul> <li>Change the bond distance between the two atoms of interest as given in <code>last_converged_SCAN_image_restart.xyz</code>. Get this by measuring the distance between the two atoms of interest in <code>ase gui last_converged_SCAN_image_restart.xyz</code></li> <li>Change the number of SCAN iterations to perform in order to keep displacement between SCAN images the same. For example, here the original displacement was \\(\\frac{\\rm{d_f} - \\rm{d_i}}{(\\rm{no.\\:SCAN\\:interations})-1} = \\frac{3.245 - 0.745}{126-1} = 0.02\\). The distance between atoms 11 and 16 in <code>last_converged_SCAN_image_restart.xyz</code> is <code>2.285 \u00c5</code>. Therefore, we need to perform \\(\\frac{d_f(\\rm{new}) - d_i}{\\rm{displacement}}+1 = \\frac{2.085 - 0.745}{0.02}+1 = 68\\) (The \\(+1\\) is so we include the initial image in the SCAN procedure).</li> </ul> <p>An examples of the two components of <code>GEOM</code> that need to be changed are given below</p> <pre><code>%GEOM\n    SCAN B 11 16 = new_initial_distance, 0.745, no_of_SCAN_iterations END\nEND\n</code></pre> <p>For example:</p> <pre><code>%GEOM\n    SCAN B 11 16 = 2.085, 0.745, 68 END\nEND\n</code></pre> </li> </ol> <p>An example of the updated <code>orca.inp</code> file is shown below</p> Example of the orca.inp file for the updated SCAN job<pre><code>!B3LYP DEF2-TZVP D3BJ\n!OPT NormalOPT TightSCF defgrid2 # Try TightOPT if you have convergence problems. \n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000\n%GEOM \n    SCAN B 11 16 = 2.085, 0.745, 68 END\n    MaxIter 200 \nEND\n* xyzfile 1 1 last_converged_SCAN_image_restart.xyz\n</code></pre> <p>Note</p> <p>I have also included <code>MaxIter 200</code> in thr <code>GEOM</code> section. This was because I was having convergence issues because the number of geometry optimisations was going over the default value of <code>50</code>. I increased this to <code>200</code> so that it would run without problems in this example. </p> </li> <li> <p>Submit your ORCA job to slurm, or run your ORCA job however you usually run ORCA. </p> </li> </ol> <p>Once your SCAN job has completed to your satisfaction, you can use <code>viewORCA scan</code> to view all your SCAN runs together. To do this, run <code>viewORCA scan</code> in the folder containing your <code>SCAN_1</code>, <code>SCAN_2</code>, <code>SCAN_3</code>, ... folders. <code>viewORCA scan</code> will collate all the SCAN jobs together in numerical order so that it looks as if only one SCAN job ran.</p> <p>Tip</p> <p><code>viewORCA scan</code> will also still create a <code>SCAN_images.xyz</code> file, containing the SCANs from all your SCAN folders pasted together. </p> <p>Note</p> <ul> <li>Click here to see the example files for this procedure in Github. </li> <li>Click here for the <code>SCAN_images.xyz</code> created for this restarted SCAN job. You should see that it gives the same <code>SCAN_images.xyz</code> file as if the SCAN job ran successfully in one go (as given here).</li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#other-information-about-performing-scan-calculations-in-orca","title":"Other information about performing <code>SCAN</code> calculations in ORCA","text":"<p>Click here to learn more about SCAN calculations from the ORCA Input Library.</p> <p>Note</p> <p>The ORCA Input Library is a great source of information about performing calculations in ORCA.</p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Ba_The_SCAN_Method.html#troubleshooting-the-scan-calculation","title":"Troubleshooting the <code>SCAN</code> calculation","text":"<p>Here are some troubleshooting tips for performing this optimisation step.</p> <p>No troubleshooting issues have been found yet. </p> <p>Info</p> <p>If you have any issues about this step, raise a <code>New issue</code> at the Issues section by clicking here.</p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html","title":"Step 2Bb: Nudged Elastic Band (NEB) Calculations","text":"<p>Tip</p> <p>Download the template folder for this step by clicking the button below and work on the files in the template folder as you read through this tutorial. </p> <p>Download Templates.zip </p> <p>In an NEB, we trace a path from the reactant to the product. An optimisation is performed across all the images at the same time in order to try to find the transition step.</p> <p>Note</p> <p>The NEB process is a bit more involved compared to the other steps. </p> <p>The general steps for performing an NEB calculation are:</p> <ol> <li>Choose an optimised structure and modify it.</li> <li>Optimise the modified structure with constraints (optional, but recommended).</li> <li>Optimise the modified structure without constraints.</li> <li>Double-check the reactant and product structures.</li> <li>Perform the Climbing Image - Nudge Elastic Band (CI-NEB) calculation.</li> </ol>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb1-choose-an-optimised-structure-and-modify-it","title":"Step 2Bb.1: Choose an Optimised Structure and Modify it","text":"<p>To begin, it is a good idea to take either the optimised <code>Reactant</code> or <code>Product</code> structure from Step 1. Then, move the relevant atoms in the structure of the <code>Reactant</code> (<code>Product</code>) so that it resembles the <code>Product</code> (<code>Reactant</code>) somewhat. </p> <ul> <li>The reason for doing this is to make sure any atoms not involved directly in the mechanism are: <ol> <li>Ordered correctly for NEB calculations, and </li> <li>To try to keep these atoms in the same position as best as possible. </li> </ol> </li> <li>The reason for doing this will be clearer once we perform the NEB calculation in Step 2Bb.5. </li> </ul> <p>Tip</p> <p>Once you have moved the atoms in your modified structure, make sure the modified atoms are fairly close to each other. This is because ORCA (as well as any DFT program) can have trouble optimising structures where atoms are initially far away from each other. </p> <ul> <li>As a rule of thumb, any atoms you have modified that are bonded to eachother should be about ~0.5 \u00c5 - ~0.75 \u00c5 apart. It is easier for ORCA to increase bond lengths during optimisations rather than decrease them. </li> </ul> <p>In this example below, I have chosen the <code>Product</code> structure to focus on. I then moved atom 17 (Cu) to the other side of the N atom (atom 12), and moved atom 16 (H) down so that it was close to the C atom (atom 11). </p> Example where the optimised product has been modified to resemble the reactant structure."},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb2-optimise-reactant-from-product-or-product-from-reactant-with-constraints-optional-but-recommended","title":"Step 2Bb.2: Optimise Reactant from Product (or Product from Reactant) With Constraints (Optional but Recommended)","text":"<p>Next, we perform a geometric optimisation calculation on this modified structure. However, we don't want the atoms that are not involved in the mechanism to move. </p> <ul> <li>To achieve this, we constrain the atoms in the molecule that are not involved in the mechanism.</li> </ul> <p>In this example, we will optimise the newly created reactant structure. Here, we have chosen to constrain the atoms in the benzene moiety from moving. The <code>orca.inp</code> file for this example is given below (also located here): </p> Example orca.inp file used to perform a geometric optimisation calculation, including constrained atoms<pre><code>!B3LYP DEF2-TZVP D3BJ \n!OPT FREQ TightOPT TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n%GEOM\n    Constraints\n        {C 0 C}\n        {C 1 C}\n        {C 2 C}\n        {C 3 C}\n        {C 4 C}\n        {C 5 C}\n    END\nEND\n* xyzfile 1 1 reactant.xyz \n</code></pre> <p>The optimisation of this constrained molecule is shown below (<code>ase gui orca_trj.xyz</code> or <code>viewORCA opt</code>):</p> Optimise Constrained Reactant <p>By constraining the benzyl atom in benzylamine, we have allowed the Cu atom to optimise to an ideal position while keeping the benzyl moiety in the same place. </p> <p>Note</p> <p>This is an optional step as we perform another geometric optimisation step in Step 2Bb.3. </p> <ul> <li>The reason for this contrained geometric optimisation step is because it makes it easier to view the structural change from our reactant to product structures and confirm both the reactant and product structures are in fact the structures we want to investigate the mechanistic step for. </li> <li>While this step is optional, it is highly recommended to perform this constrained optimisation job before performing a unconstrained geometric optimisation in Step 2Bb.3, as it makes it easier to check you are happy with your reactant and product structure before performing the NEB calculation. </li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb3-optimise-reactant-from-product-or-product-from-reactant-without-constraints","title":"Step 2Bb.3: Optimise Reactant from Product (or Product from Reactant) Without Constraints","text":"<p>Now that we have optimised the constrained reactant, we now repeat the optimisation process above, but without the constraints.</p> <ul> <li>We do this to make sure that this structure is absolutely in a local minimum.</li> <li>We do not expect the atoms in this molecule to move much, as the atoms we contrained were from an already optimised structure. </li> </ul> <p>The ORCA input file here as the same as in Step 2Bb.2, excluding the <code>Constraints</code> component. The <code>orca.inp</code> file for this example is given below (also located here): </p> Example orca.inp file used to perform a geometric optimisation calculation, excluding constrained atoms<pre><code>!B3LYP DEF2-TZVP D3BJ \n!OPT FREQ TightOPT TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n* xyzfile 1 1 reactant_opt_constrained.xyz \n</code></pre> <p>In this example, the unconstrained optimisation calculation does not change the molecule much, which is what we ideally want. </p> <p>IMPORTANT</p> <p>If you find the atoms have changed position significantly compared to that in Step 2Bb.2, this is a problem.</p> <ul> <li>If this happens, you likely need to go back to Step 1 and make sure your original structure is geometrically optimised. </li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb4-double-check-the-reactant-and-product-structures","title":"Step 2Bb.4: Double-Check the Reactant and Product Structures","text":"<p>Before beginning the NEB calculation, it is a good idea to perform some double checks on your reactant and product structures. These checks have already been mentioned, but it is worth mentioning them again. There are:</p> <ul> <li>Make sure you are happy with your input reactant and product structures, and</li> <li>Make sure the atom index ordering between your input reactant and product structures are as expected (i.e. the same). </li> </ul> <p>To help perform these two checks, use the <code>ase gui</code> as follows:</p> <ol> <li> <p>Change directory into the folder containing the NEB calculation, as open both your optimised reactant and products in <code>ase gui</code>:</p> <pre><code># change directory into the folder containing your NEB calculation\ncd ORCA_Mechanism_Procedure/Examples/Step2_Find_TS/Step2Bb_NEB/Step2Bb_4_Double_Check\n\n# View the reactant and product for the NEB calculation using ASE\nase gui reactant_opt_unconstrained.xyz product_opt.xyz\n</code></pre> </li> <li> <p>Next, in the ASE GUI click <code>View</code> -&gt; <code>Show Labels</code> -&gt; <code>Atom Index</code>. This will display the indices of the atoms in your reactant and product structures. </p> </li> <li> <p>Flick between the reactant and product structures and check that the structures of the reactant and product are: </p> <ul> <li>As expected (i.e. look like the reactant and product you want to understand the mechanistic step for).</li> <li>Have the same index ordering. </li> </ul> </li> </ol> <p>Example</p> <p>In the example below, </p> <ul> <li>The reactant and the product look like the mechanism we described in the first mechanistic step iun the Before You Begin step, and</li> <li>We see that the atom indices for each atom in the reactant and product align with each other, such that there is a natural way to get from reactants to products. </li> </ul> <p>So we are happy </p> <p> Optimised Reactant and Product for NEB Calculation. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#step-2bb5-perform-the-climbing-image-nudge-elastic-band-ci-neb-calculation","title":"Step 2Bb.5: Perform the Climbing Image - Nudge Elastic Band (CI-NEB) Calculation","text":"<p>In an NEB, we trace a path from the reactant to the product. An optimisation is performed across all the images at the same time in order to try to find the transition step.</p> <p>In the <code>.inp</code> file, you want to include the following:</p> <pre><code>!NEB-CI TightSCF defgrid2\n</code></pre> <p>The tags here indicate you want to do the following: </p> <ul> <li><code>NEB-CI</code>: This keyword will perform a nudged-elastic band (NEB) calculation upon your system using the climbing image (CI) varient of the NEB algorithm. </li> <li><code>TightSCF</code>: Tells ORCA to tighten the convergence criteria for each electronic step. </li> <li><code>defgrid2</code>: Indicates how fine we want the intergration grid to be (This is the default).</li> </ul> <p>We also include the following NEB settings: </p> <pre><code>%NEB\n    NEB_END_XYZFILE \"product_opt.xyz\"\n    Nimages 100\n    Interpolation IDPP\n    Opt_Method LBFGS\nEND\n* xyzfile 1 1 reactant_opt_unconstrained.xyz\n</code></pre> <p>The tags here indicate you want to do the following in your NEB calculation: </p> <ul> <li><code>NEB_END_XYZFILE</code>: This is the reactant structure you want to use. Include this file in the same place as your ORCA <code>.inp</code> file.</li> <li><code>Nimages</code>: These are the number of images you want to include in the NEB calculation (not including the reactant and product image). <ul> <li>In this example, we will create 102 images from <code>reactant_opt_unconstrained.xyz</code> to <code>opt_product.xyz</code> (100 images in between but not including <code>reactant_opt_unconstrained.xyz</code> to <code>opt_product.xyz</code>)</li> </ul> </li> <li><code>Interpolation</code>: This is the interpolation scheme first used to create all the initial images. </li> <li><code>Opt_Method</code>: This is the optimisation method used. </li> </ul> <p>IMPORTANT</p> <p>It is important that the atom ordering in your reactant and product <code>xyz</code> files are the same, otherwise you will problems where atoms seems to move about in nosense ways. If you have check this during Step 2Bb.4, you should be all good to go.</p> NOTE 1 <p>In this example I have set <code>Nimages</code> to 100. I chose this to allow for some smoothness between images in the mechanistic step. However, you could set this to much less and everything would probably work. For example, 20 would probably also work fine. </p> <ul> <li>Try not to use too many images, as this can cause problems and also increases the amount of time required for the NEB to converge. </li> </ul> NOTE 2 <p>I use <code>LBFGS</code> in this example as the optimisation method. This is a very good algorithm, but it can be a bit loose and cause issues. In testing I tried the <code>FIRE</code> method, This worked also, but causes jitters which can lead to problems. </p> <ul> <li>The point is if you have convergence problems, try using another method for <code>Opt_Method</code>. </li> <li>See the ORCA manual 6.1.0: Page 651 for options for this setting. </li> </ul> <p>In this example, we are looking at how a Cu atom could insert itself into a C-H bond. The full <code>orca.inp</code> file is given below (also located here): </p> Example orca.inp file used to perform a NEB calculation<pre><code>!B3LYP DEF2-TZVP D3BJ\n!NEB-CI TightSCF defgrid2\n%SCF\n    MaxIter 2000       # Here setting MaxIter to a very high number. Intended for systems that require sometimes 1000 iterations before converging (very rare).\n    DIISMaxEq 5        # Default value is 5. A value of 15-40 necessary for difficult systems.\n    directresetfreq 15 # Default value is 15. A value of 1 (very expensive) is sometimes required. A value between 1 and 15 may be more cost-effective.\nEND\n%CPCM EPSILON 6.02 REFRAC 1.3723 END\n%PAL NPROCS 32 END\n%maxcore 2000 # This indicates you want ORCA to use only 2GB per core maximum, so ORCA will use only 2GB*32=64GB of memory in total.\n%NEB\n    NEB_END_XYZFILE \"product_opt.xyz\"\n    Nimages 100\n    Interpolation IDPP\n    Opt_Method LBFGS\nEND\n* xyzfile 1 1 reactant_opt_unconstrained.xyz\n</code></pre>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#outputs-from-orca","title":"Outputs from ORCA","text":"<p>ORCA will create a number of files, as well as the <code>output.out</code> file. These are the important ones to look at for NEB calculations: </p> <ul> <li><code>orca_initial_path_trj.xyz</code>: This is the initial NEB path that you want to investigate. </li> <li><code>orca_MEP_trj.xyz</code>: This is the NEB trajectory for the mechanism.</li> <li><code>orca_NEB-TS_converged.xyz</code>: This is the transition state that was obtained from this NEB calculation. </li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#important-things-to-do-while-the-neb-calculation-is-running","title":"IMPORTANT: Things to do while the NEB calculation is running","text":"<p>Once ORCA has begun running the NEB calculation, there are two things that you should do:</p> <ol> <li>Check the <code>orca_initial_path_trj.xyz</code> file.</li> <li>Check the NEB calculation daily.</li> </ol> <p>Below is a description of these two checks:</p> <p>1. Check the <code>orca_initial_path_trj.xyz</code> file</p> <p>Once ORCA begins, the first step in the NEB calculation is to create all the initial images connecting the reactant and the product using an interpolation scheme. </p> <ul> <li>ORCA will create a file called <code>orca_initial_path_trj.xyz</code>. This file gives an idea of the initial NEB path that ORCA will begin investigating. </li> <li>Check this file in <code>ase gui</code> and see that this initial mechanistic pathway look somewhat sensible.</li> </ul> <pre><code># change directory into the folder containing your NEB calculation\ncd ORCA_Mechanism_Procedure/Examples/Step2_Find_TS/Step2Bb_NEB/Step2Bb_5_Run_NEB_Calculation\n\n# View the reactant and product for the NEB calculation using ASE\nase gui orca_initial_path_trj.xyz\n</code></pre> Example <p>For this example, the <code>orca_initial_path_trj.xyz</code> file looks like this:</p> <p> Check the initial interpolation path given in the orca_initial_path_trj.xyz file </p> <p>In this example, atom 16 (H) floats away in free space from atom 11 (C), and there is a bit of time before atom 16 bonds to atom 17 (Cu). </p> <ul> <li>This indicates there may be a problem and the NEB calculation might have trouble. </li> <li>However, NEB calculations are designed to change the mechanistic path to account for this and will find a more likely mechanistric pathway, so this is not a horrible initial NEB pathway. </li> </ul> <p>I would be happy with this calculation to proceed as it is, but it would be wise to check this calculation daily as it runs. </p> <p>Tip</p> <p>The general rule is: The simplier you can make the initial NEB pathway, the more likely the NEB calculation will converge. </p> <p>2. Check the NEB calculation daily</p> <p>NEB calculations, like any ORCA or DFT calculation, have the potential to go in weird directions that makes convergence unlikely. This is particularly the case for NEB calculations. For this reason, it is important to do the following checks on a daily basis: </p> <ol> <li> <p>Check the <code>orca_MEP_trj.xyz</code> file. This file describes the current reaction pathway as calculated by NEB. </p> <ul> <li>View this file by running <code>ase gui orca_MEP_trj.xyz</code> in the terminal. </li> <li>Hopefully the NEB path given in this file look better and better as ORCA proceeds. </li> <li>The main thing is to check that the NEB path given by <code>orca_MEP_trj.xyz</code> is still sensible by your chemical intuition. </li> </ul> </li> <li> <p>Check the <code>output.log</code> file to make sure everything is running smoothly.</p> <ul> <li>The best way to check the <code>output.log</code> file is to scroll to the bottom of the <code>output.log</code> file. </li> <li>If there are any problems, it may come up in the <code>output.log</code> file.</li> <li>If you are using slurm, you should also look at the slurm output and error files to see if there are any issues reported there. </li> </ul> </li> <li> <p>Check how the energy profile of the NEB calculation has changed by running the <code>viewORCA neb_snap</code> command in your terminal. </p> <ul> <li>This command will present the energy profile snapshots of all the NEB iterations that ORCA has performed thus far. </li> <li>Run this command by changing directory to the folder containing your NEB run in the terminal, and then running the <code>viewORCA neb_snap</code> command.</li> </ul> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Examples/Step2_Find_TS/Step2Bb_NEB/Step2Bb_5_Run_NEB_Calculation\n\n# View the NEB calculation \nviewORCA neb_snap\n</code></pre> <ul> <li> <p><code>viewORCA neb_snap</code> will create two files. These are: </p> <ul> <li><code>orca_NEB_optimization.png</code>: This file contains the plots of all the NEB optimisation iterations that have been performed so far.</li> <li><code>orca_NEB_last_iteration.png</code>: This is the plot of the last NEB optimisation iteration.</li> </ul> </li> </ul> Example <p>Examples of the <code>orca_NEB_optimization.png</code> and <code>orca_NEB_last_iteration.png</code> files are shown below:</p> <p> Energy profile of each NEB optimisation iteration performed by ORCA. This is given by the 'orca_NEB_optimization.png' file. </p> <p> Energy profile of the last NEB optimisation iteration, as performed by ORCA. This is given by the 'orca_NEB_last_iteration.png' file. </p> </li> </ol>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#how-to-analyse-the-output-files-after-the-neb-calculation-has-finished","title":"How to analyse the output files after the NEB calculation has finished","text":"<p>Once ORCA has finished performing the NEB calculation, we will want to visualise the NEB. You can visualize how ORCA has performed the mechanistic step by typing <code>viewORCA neb</code> into the terminal. </p> <pre><code># cd into your optimisation folder\ncd ORCA_Mechanism_Procedure/Examples/Step2_Find_TS/Step2Bb_NEB/Step2Bb_5_Run_NEB_Calculation\n\n# View the NEB calculation \nviewORCA neb\n</code></pre> <p>You will get a GUI that shows you the following NEB pathway:</p> NEB Images <p>The energy profile for this example is given below:</p> NEB Energy Profile <p>You can see that a transition state is given by ORCA as the <code>orca_NEB-CI_converged.xyz</code> file. This is what the given transition state looks like in this example:</p> Transition State as obtained by the CI-NEB calculation."},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#other-comments-about-nebs","title":"Other comments about NEBs","text":""},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#comments-about-the-opt_method-settings","title":"Comments about the <code>Opt_Method</code> settings","text":"<p>The <code>LBFGS</code> is a common optimisation algorithm used in geometric optimisations. The note from ORCA is that The L-BFGS is more aggressive and efficient, but also more error-prone. Because of this, it is a common strategy to change the optimisation algorithm used to help the NEB calculation. </p> <ul> <li>In testing this proceedure I also used the <code>FIRE</code> which is also a good algorithm. </li> <li>However in this case, the <code>FIRE</code> algorithm was less able to scout the NEB. </li> <li>Here is the NEB for the same NEB calculation shown above using the <code>FIRE</code> method.</li> </ul> <p>This is the NEB path that I got from the NEB calculation using the <code>FIRE</code> algorithm: </p> NEB Images using the FIRE algorithm <p>The energy profile for this example is given below:</p> NEB Energy Profile using the FIRE algorithm <p>You can see from the NEB path and the energy profile that its a bit jittery, but overall the NEB did work as we found a good transition state:</p> Transition State as obtained by the CI-NEB calculation using the FIRE algorithm. <p>At the end of the day, it doesnt matter how \"well\" the NEB calculation did, it only depends if we find a sufficient transition state that we can further optimise in Step 3: Optimise the Transition State. So I would say I would be happy with how this NEB ran, and would have continued to Step 3. </p>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#other-information-about-performing-nebs-in-orca","title":"Other Information about performing NEBs in ORCA","text":"<p>The following links have good information for performing NEBs in ORCA:</p> <ul> <li>https://www.faccts.de/docs/orca/6.0/tutorials/react/nebts.html: Nice article from the developers about how to perform an NEB in ORCA.</li> <li>https://sites.google.com/site/orcainputlibrary/geometry-optimizations/tutorial-neb-calculations: Nice extra information for performing and analysising NEBs.</li> <li>https://github.com/via9a/neb_visualize: Contain another program for analysing how the NEB optimised. This program is really good for figuring out how the NEB optimised itself, very helpful!</li> </ul>"},{"location":"Step_2_Examine_Reaction_Pathway/Step_2Bb_The_NEB_Method.html#troubleshooting-the-nudged-elastic-band-neb-calculation","title":"Troubleshooting the Nudged Elastic Band (<code>NEB</code>) Calculation","text":"<p>Here are some troubleshooting tips for performing this optimisation step.</p> <p>Also look at the following websites for help:</p> <ul> <li>https://sites.google.com/site/orcainputlibrary/scf-convergence-issues (apart of https://sites.google.com/site/orcainputlibrary)</li> </ul> <p>No troubleshooting issues have been found yet. </p> <p>Info</p> <p>If you have any issues about this step, raise a <code>New issue</code> at the Issues section by clicking here.</p>"}]}